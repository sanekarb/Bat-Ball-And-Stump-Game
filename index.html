<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      body {
        text-align: center;
        background-color: bisque;
      }
      .button {
        font-size: 35px;
        border-radius: 5px;
        margin: 20px;
        background-color: darkkhaki;
      }
      #heading {
        font-size: 50px;
        background-color: beige;
      }
    </style>
    <title>Cricket Game</title>
  </head>
  <body>
    <h1 id="heading">Bat Ball 🏏 And Stump ☄\|/ Game</h1>
    <div>
      <button
        class="button"
        onclick="
        // console.log('User has chosen Bat');
        let computerChoice = generateComputerChoice(); // Function Calling
        let result = getResult('Bat',computerChoice);
        showResult('Bat',computerChoice,result);
        "
      >
        Bat🏏
      </button>

      <button
        class="button"
        onclick="  
       // console.log('User has chosen Ball');
       computerChoice = generateComputerChoice() // Function Calling
       result =   getResult('Ball',computerChoice);
       showResult('Ball',computerChoice,result);
       "
      >
        Ball 🔴
      </button>

      <button
        class="button"
        onclick="
      // console.log('User has chosen Stump');
       computerChoice = generateComputerChoice() // Function Calling
       result =   getResult('Stump',computerChoice);
       showResult('Stump',computerChoice,result);
      "
      >
        Stump \|/
      </button>

      <button
        class="button"
        onclick="
      localStorage.clear()
      resetScore(''); // empty string pass hui smjh le jisko hum undefined me consider krte hai
      "
      >
        Reset
      </button>
    </div>

    <script>
      // Object
      let scoreStr = localStorage.getItem("score");

      // ya to aise karo basic tarah se

      // let score;
      // if (scoreStr !== undefined) {
      //   score = JSON.parse(scoreStr);
      // } else {
      // score = {
      //   win: 0,
      //   loss: 0,
      //   tie: 0,
      // };
      // }

      // Ya Humne Shorthand dekha tha

      // let score = JSON.parse(scoreStr) || {
      //   win: 0,
      //   loss: 0,
      //   tie: 0,
      // };
      // score.displayScore = function () {
      //   return `Win => ${score.win}\nLoss => ${score.loss}\ntie => ${score.tie}`;
      // };

      // For Reset Button chalane ke liye upar wale ko code kuch iss tarah se likhenge

      let score;
      resetScore(scoreStr);
      function resetScore(scoreStr) {
        score = scoreStr
          ? JSON.parse(scoreStr)
          : {
              win: 0,
              loss: 0,
              tie: 0,
            };
        score.displayScore = function () {
          return `Win => ${score.win}\nLoss => ${score.loss}\ntie => ${score.tie}`;
        };
      }

      function generateComputerChoice() {
        let randomNo = Math.random() * 3;
        // This will generate random no between 0 to 3
        if (randomNo > 0 && randomNo <= 1) {
          return "Bat";
          // Computer has chosen Bat
        } else if (randomNo > 1 && randomNo <= 2) {
          return "Ball";
          // Computer has chosen Ball
        } else {
          return "Stump";
          //Computer has chosen Stump
        }
      }

      function getResult(userMove, computerMove) {
        if (userMove === "Bat") {
          if (computerMove === "Bat") {
            score.tie++;
            return `It's  a Tie`;
          } else if (computerMove === "Ball") {
            score.win++;
            return `User has Won`;
          } else {
            score.loss++;
            return `Computer has Won`;
          }
        } else if (userMove === "Ball") {
          if (computerMove === "Ball") {
            score.tie++;
            return `It's  a Tie`;
          } else if (computerMove === "Stump") {
            score.win++;
            return `User has Won`;
          } else {
            score.loss++;
            return `Computer has Won`;
          }
        } else {
          if (computerMove === "Stump") {
            score.tie++;
            return `It's  a Tie`;
          } else if (computerMove === "Bat") {
            score.win++;
            return `User has Won`;
          } else {
            score.loss++;
            return `Computer has Won`;
          }
        }
      }
      function showResult(userMove, computerChoice, result) {
        localStorage.setItem("score", JSON.stringify(score));
        alert(
          `User Choice Is ${userMove}\nComputer Choice Is ${computerChoice}\nResult ${result}\nYour Score Is\n ${score.displayScore()}`
        );
      }
    </script>
  </body>
</html>
